<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Graphics</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>

<body>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1 class="heading">Курс валют</h1>
        </div>
    </div>
</div>

<form action="http://localhost:8080/test/history" method="get" target="_self">
    <div class="form-group">
        <label for="cur_id">Валюта</label>
        <select name="cur_id" class="form-control" id="cur_id" required>
            <option value="" selected disabled hidden>Веберите валюту</option>
            <option value="513">AED</option>
            <option value="440">AUD</option>
            <option value="510">AMD</option>
            <option value="441">BGN</option>
            <option value="514">BRL</option>
            <option value="371">CAD</option>
            <option value="426">CHF</option>
            <option value="462">CNY</option>
            <option value="463">CZK</option>
            <option value="450">DKK</option>
            <option value="451">EUR</option>
            <option value="429">GBP</option>
            <option value="453">ISK</option>
            <option value="511">INR</option>
            <option value="461">IRR</option>
            <option value="508">JPY</option>
            <option value="458">KGS</option>
            <option value="459">KZT</option>
            <option value="394">KWD</option>
            <option value="454">MDL</option>
            <option value="448">NZD</option>
            <option value="455">NOK</option>
            <option value="452">PLN</option>
            <option value="456">RUB</option>
            <option value="421">SGD</option>
            <option value="464">SEK</option>
            <option value="460">TRY</option>
            <option value="449">UAH</option>
            <option value="431">USD</option>
            <option value="512">VND</option>
            <option value="457">XDR</option>
        </select>
        <!--<script type='text/javascript'>
            var select = document.getElementById("cur_id");
            var option = document.createElement("option");
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", "http://45.156.21.73:7788/test/currencies", false ); // false for synchronous request
            xmlHttp.send( null );
            console.log(xmlHttp.responseText);
            // цикл
            option.value = "hand";
            option.text = "Hand";
            select.add(option);

        </script>-->
    </div>
    <div class="form-group">
        <label for="startdate">Дата от</label>
        <input type="date" name="startdate" class="form-control" id="startdate" required>
    </div>
    <div class="form-group">
        <label for="enddate">Дата до</label>
        <input type="date" name="enddate" class="form-control" id="enddate" required>
    </div>
    <div class="bton">
        <button id="submitForm" type="submit" class="btn btn-primary">Выполнить</button>
    </div>
    <div class="bton">
        <button type="reset" class="btn btn-primary">Сбросить</button>
    </div>
</form>

<!--ajax запрос с отправкой формы без обновления страницы
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $("submitForm").click(function () { // задаем функцию при нажатиии на элемент <button>
            console.log('button pushed');
            $.ajax({
                url: "https://www.nbrb.by/api/exrates/rates/dynamics/{{$cur_id}}?startdate={{$startdate}}&enddate={{$enddate}}", /*'http://localhost:8080/test/history',         /* Куда пойдет запрос */
                method: 'get',             /* Метод передачи (post или get) */
                dataType: 'json',          /* Тип данных в ответе (xml, json, script, html). */
                jsonp: false,
                data: {
                    cur_id: this.cur_id,
                    startdate: this.startdate,
                    enddate: this.enddate
                },                          /* Параметры передаваемые в запросе. */
                cache: false,
                success: [function (msg) {          // функции обратного вызова, которые вызываются если AJAX запрос выполнится успешно (если несколько функций, то необходимо помещать их в массив)
                    $("p").text("User saved: " + msg); // добавляем текстовую информацию и данные возвращенные с сервера
                },
                    function () {                   // вызов второй функции из массива
                        console.log("next function");
                    }],  /* функция которая будет выполнена после успешного запроса. */
                error: function (jqXHR, exception) {
                    if (jqXHR.status === 0) {
                        alert('Not connect. Verify Network.');
                    } else if (jqXHR.status === 404) {
                        alert('Requested page not found (404).');
                    } else if (jqXHR.status === 500) {
                        alert('Internal Server Error (500).');
                    } else if (exception === 'parsererror') {
                        alert('Requested JSON parse failed.');
                    } else if (exception === 'timeout') {
                        alert('Time out error.');
                    } else if (exception === 'abort') {
                        alert('Ajax request aborted.');
                    } else {
                        alert('Uncaught Error. ' + jqXHR.responseText);
                    }
                }
            });
        });
    });
</script>-->

<!-- иллюстрация графика валюты
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<figure class="highcharts-figure">
    <div id="container"></div>
    <p class="highcharts-description">
        Highcharts has extensive support for time series, and will adapt
        intelligently to the input data. Click and drag in the chart to zoom in
        and inspect the data.
    </p>
</figure>-->
</body>
<footer>
    <p class="powered">Powered by <a href="https://t.me/valentine_kalinin">Valentine Kalinin</a></p>
</footer>
</html>
